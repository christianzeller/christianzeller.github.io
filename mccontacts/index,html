<!-- | ID | Title | User Story | Acceptance Criteria (Gherkin) |
|----|-------|------------|-------------------------------|
| S1 | Upload Meshcore contact export | As a Meshcore user, I want to upload my Meshcore contact export file in JSON format, so that the app can analyse and clean up my contacts. | Scenario: Successful upload of a valid Meshcore contacts file<br>Given I am on the start page of the PWA<br>And I see an option to select a Meshcore contacts export file<br>When I select a JSON file that contains a "contacts" array in the expected Meshcore format<br>Then the file is loaded in the browser memory without being uploaded to any server<br>And I see a confirmation that the contacts have been loaded.<br><br>Scenario: Upload of an invalid file<br>Given I am on the start page of the PWA<br>When I select a file that is not valid JSON or does not contain a "contacts" array<br>Then I see a clear error message explaining that the file format is not supported<br>And no contacts are shown. |
| S2 | Parse contacts and classify types | As a Meshcore user, I want the app to parse and classify my contacts by type, so that cleanup rules can be applied correctly. | Scenario: Contacts are parsed and classified<br>Given I have successfully uploaded a valid Meshcore contacts JSON file<br>When the app parses the "contacts" array<br>Then each contact is read with its fields (type, name, custom_name, public_key, flags, last_advert, last_modified, out_path, latitude, longitude, …)<br>And each contact is internally classified as repeater, companion, sensor, or room based on the "type" field or equivalent mapping.<br><br>Scenario: Favorites are detected<br>Given I have uploaded a valid Meshcore contacts JSON file<br>When the app parses the contacts<br>Then it determines for each contact whether it is a favorite based on the "flags" value according to the Meshcore definition<br>And this favorite information is available for later rules and UI display. |
| S3 | Apply cleanup rules for removal suggestions | As a Meshcore user, I want the app to automatically suggest which contacts to remove based on predefined rules, so that I can quickly clean up my contact list. | Scenario: Repeater suggestion logic<br>Given I have uploaded contacts including repeaters<br>And the app knows the current date and time<br>When the app evaluates repeater contacts<br>Then a repeater is suggested for removal if its last_advert is older than 10 days relative to the current time<br>And it is not marked as favorite<br>And the first two characters of its public_key do not appear in any routing path to contacts (e.g. out_path or equivalent) that are currently planned to be kept.<br><br>Scenario: Companion suggestion logic<br>Given I have uploaded contacts including companions (non-repeater user devices)<br>When the app evaluates companion contacts<br>Then a companion is suggested for removal if it has not been heard for at least 10 days (based on last_advert or last_modified as defined)<br>And it is not marked as favorite<br>And it does not have a user-defined path (e.g. out_path is empty or equals the default flood-routing value).<br><br>Scenario: Sensor suggestion logic<br>Given I have uploaded contacts including sensors<br>When the app evaluates sensor contacts<br>Then a sensor is suggested for removal if it is not marked as favorite.<br><br>Scenario: Rooms are never suggested for removal<br>Given I have uploaded contacts including rooms<br>When the app evaluates room contacts<br>Then no room contact is suggested for removal regardless of other criteria. |
| S4 | Show contact list with suggested action and reason | As a Meshcore user, I want to see all contacts in a mobile-friendly list with suggested keep/remove actions and an explanation, so that I understand why a contact is suggested for removal. | Scenario: Contact list layout<br>Given the app has parsed and evaluated my contacts<br>When the contact list is rendered<br>Then each contact is shown with a checkbox at the beginning of the row that indicates whether the contact will be kept (checked) or removed (unchecked)<br>And the first line shows the contact name (custom_name if available, otherwise name)<br>And the second line shows the contact type and public_key (or shortened public_key)<br>And the third line shows a short textual reason describing which rule was applied (e.g. “Not heard for 10 days, not favorite, no custom path”).<br><br>Scenario: Visual distinction of suggestions<br>Given the app has suggested which contacts to remove<br>When the list is shown<br>Then contacts suggested for removal are indicated visually (e.g. different text style or badge)<br>And contacts suggested to be kept appear as normal entries with checked checkboxes. |
| S5 | Allow manual override of keep/remove selection | As a Meshcore user, I want to manually change which contacts are kept or removed via checkboxes, so that I retain full control over my final contact list. | Scenario: Overriding suggestion to remove<br>Given a contact is currently suggested for removal and its checkbox is unchecked<br>When I tap or click the checkbox<br>Then the checkbox becomes checked<br>And the contact is now marked to be kept in the export<br>And the UI state remains consistent (e.g. label or icon updates if used).<br><br>Scenario: Overriding suggestion to keep<br>Given a contact is currently suggested to be kept and its checkbox is checked<br>When I tap or click the checkbox<br>Then the checkbox becomes unchecked<br>And the contact is now marked to be removed in the export.<br><br>Scenario: Summary of selection<br>Given I have modified several checkboxes<br>When I look at the summary area (if present)<br>Then I can see how many contacts will be kept and how many will be removed. |
| S6 | Export cleaned contacts in same JSON format | As a Meshcore user, I want to export a cleaned contacts file in the exact same JSON structure as the original Meshcore export, so that I can re-import it into Meshcore without manual changes. | Scenario: Generate cleaned contacts JSON<br>Given I have uploaded a valid Meshcore contacts file<br>And the app has applied its rules<br>And I have optionally adjusted the keep/remove checkboxes<br>When I request to export the cleaned contacts<br>Then the app creates a JSON file in the browser<br>And the "contacts" array contains only those contacts that are marked as kept<br>And the structure and field names match the original Meshcore export format.<br><br>Scenario: Download cleaned file<br>Given a cleaned contacts JSON has been generated<br>When the disclaimer has been accepted (see disclaimer story)<br>And I click the download button<br>Then the JSON file is downloaded to my device<br>And no data is sent to any server. |
| S7 | Enforce disclaimer before download | As a Meshcore user, I want to explicitly accept a disclaimer before downloading the cleaned contacts file, so that I understand that I use the tool at my own risk. | Scenario: Disclaimer shown before first download<br>Given I have uploaded and reviewed my contacts<br>And I click on the button to export or download the cleaned contacts<br>When I have not yet accepted the disclaimer in this session<br>Then a popup or dialog is shown containing the disclaimer text (including that usage is at my own risk and there is no liability for damaged contact lists or Meshcore app issues)<br>And the download is blocked until I accept the disclaimer.<br><br>Scenario: Accepting the disclaimer<br>Given the disclaimer dialog is shown<br>When I confirm or accept the disclaimer<br>Then the dialog closes<br>And the download of the cleaned contacts file starts or the export button becomes active.<br><br>Scenario: Declining the disclaimer<br>Given the disclaimer dialog is shown<br>When I cancel or decline the disclaimer<br>Then the dialog closes<br>And no file is downloaded<br>And I remain on the review screen. |
| S8 | Help page for Meshcore export/import steps | As a Meshcore user, I want to see a simple static help page explaining how to export and import contacts in Meshcore, so that I can safely use the tool. | Scenario: Help page content<br>Given I am on the PWA<br>When I navigate to the help page (e.g. via a Help button or link)<br>Then I see a static, single-language description of the steps to export contacts from Meshcore (e.g. “App → Settings → Export Config → select only contacts”)<br>And I see a description of the steps to re-import the cleaned contacts via “Import Config”<br>And I see a recommendation to keep the original export as backup in case something goes wrong.<br><br>Scenario: Return from help page<br>Given I am on the help page<br>When I use the provided navigation (e.g. back button or link)<br>Then I return to the main screen of the app without losing my current upload and selections in the session. |
| S9 | PWA installability and offline-first behaviour | As a Meshcore user, I want the app to work as a Progressive Web App that I can install on my phone and use offline, so that I can clean up contacts even without internet access. | Scenario: PWA install prompt availability<br>Given I open the app in a supported mobile browser<br>When the app is loaded<br>Then the app exposes a valid web app manifest and service worker<br>And the browser can offer an “Add to Home Screen” or equivalent install option.<br><br>Scenario: Offline usage after first load<br>Given I have opened the app at least once with internet access<br>And the service worker and assets have been cached<br>When I open the app again while offline<br>Then I can still access the main screen<br>And I can upload a Meshcore contacts JSON file from my device<br>And I can run the full cleanup, review, and export flow without a network connection. |
| S10 | Client-only processing and privacy | As a Meshcore user, I want all contact processing to happen only in my browser without sending data to a server, so that my contacts stay private. | Scenario: No server-side data transfer<br>Given I have uploaded a Meshcore contacts JSON file<br>When I use the app to analyse, review, and export contacts<br>Then all processing of the contacts happens in the browser memory only<br>And the app does not send the content of the contacts JSON to any remote server or API.<br><br>Scenario: No data persistence beyond the session<br>Given I have uploaded and processed contacts<br>When I close the browser tab or PWA<br>Then the app does not persist the contacts on the device beyond what the browser automatically caches for the app shell<br>And when I reopen the app, I have to upload contacts again before using the cleanup functionality. |
-->
